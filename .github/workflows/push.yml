name: Push Docker Image And Tag Commit

on:
  workflow_call:
    inputs:
      image:
        description: "Docker Image Name"
        required: true
        type: string
      artifact:
        description: "Artifact for Docker Image"
        required: false
        type: string
      target_branch:
        description: "Branch to be merged Into"
        required: false
        type: string

jobs:
  tag-commit:
    uses: draftm0de/kernel.deployment/.github/workflows/push-tag.yml@main
    with:
      target_branch: ${{ inputs.target_branch }}

  push-image:
    uses: draftm0de/kernel.deployment/.github/workflows/push-image.yml@main
    with:
      image: ${{ inputs.image }}
      # artifact: ${{ inputs.artifact }}
      target_branch: ${{ inputs.target_branch }}
